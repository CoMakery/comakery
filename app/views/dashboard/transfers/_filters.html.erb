<div class="transfers-filters">
  <% if request.params[:q] %>
    <h2>
      filters

      <div class="transfers-filters--clear">
        <%= button_to "clear filters âŒ«", project_dashboard_transfers_path, method: :get %>
      </div>
    </h2>
  <% end %>

  <% if request.params[:q] && request.params[:q][:id_eq] %>

    <div class="transfers-filters--filter">
      <h3>transfer id</h3>

      <div class="transfers-filters--filter--options">
        <div class="transfers-filters--filter--options__active">
          #<%= request.params[:q][:id_eq] %>
        </div>
      </div>
    </div>

  <% elsif request.params[:q] && request.params[:q][:account_id_eq] %>

    <div class="transfers-filters--filter">
      <h3>account id</h3>

      <div class="transfers-filters--filter--options">
        <div class="transfers-filters--filter--options__active">
          #<%= request.params[:q][:account_id_eq] %>
        </div>
      </div>
    </div>

  <% else %>
    <div class="transfers-filters--filter calendar">
      <h3>Transfers</h3>&nbsp;
      <div class="calendar">
        <%= react_component('TransfersCalendar') %>
      </div>
    </div>
  <% end %>
  <div class="transfers-filters--filter">
    <div class="row align-items-right">
      <% hot_wallet = @project.hot_wallet %>
      <% if hot_wallet.present? %>
        <% if policy(@project).edit_hot_wallet_mode? %>
          <div class="col-md-9 hot-wallet">
            <%= render partial: 'hot_wallet_mode', locals: { project: @project } %>
          </div>
          <div class="col-md-3 batch-size">
            <%= render partial: 'batch_size', locals: { project: @project } %>
            <%= render partial: 'projects/batch_size_modal', locals: { project: @project } %>
          </div>
        <% else %>
          <div class="hot-wallet-address">
            Hot Wallet:&emsp; <%= link_to(
                                      middle_truncate(hot_wallet.address),
                                      hot_wallet.blockchain.url_for_address_human(hot_wallet.address),
                                      target: :_blank,
                                      class: 'mr-2',
                                      data: { controller: "utils--truncate",
                                              target: "utils--clipboard.source",
                                              width: "300" }) %>
          </div>
        <% end %>
      <% elsif policy(@project).edit_hot_wallet_mode? && @project.token&._token_type_on_ethereum? %>
        <div class="col-md-12 hot-wallet">
          <a href="<%= deploy_to_heroku_url(@project) %>" target="_blank">
            <img src="https://www.herokucdn.com/deploy/button.svg" alt="Deploy">
          </a>
        </div>
      <% end %>
    </div>
  </div>
  <% if policy(@project).create_transfer? %>
    <div class="transfers-filters--filter">
      <div class="transfers-filters--filter--options">
        <%= select 'select',
                   'transfers',
                   {},
                   { include_blank: 'Create New Transfer' },
                   { class: 'transfers-select',
                     data: { target: 'transfer-form.create', action: 'transfer-form#showForm' } } do %>
          <%= options_from_collection_for_select(@project.transfer_types, 'id', 'name') %>
          <% if policy(@project).transfer_types? %>
            <%= tag.option 'Manage Categories', { 'data-url': project_dashboard_transfer_categories_path(@project) } %>
          <% end %>
        <% end %>
        <svg xmlns="http://www.w3.org/2000/svg"
             class="transfers-select-arrow-icon"
             width="24"
             height="24"
             viewBox="0 0 24 24"
             stroke-width="2"
             stroke="currentColor"
             fill="none"
             stroke-linecap="round"
             stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
      </div>
    </div>
  <% end %>
</div>
<div class="transfers-filters">
  <div class="transfers-filters--filter wallet-connect">
    <%= render partial: 'shared/wallet_connect' if policy(@project).create_transfer? %>
  </div>
</div>
